import { NextResponse } from \"next/server\";\nimport twilio from \"twilio\";\n\nexport async function GET(req: Request) {\n  const { searchParams } = new URL(req.url);\n  const phone = searchParams.get(\"phone\");\n  if (!phone) return NextResponse.json({ error: \"Missing phone\" }, { status: 400 });\n\n  const client = twilio(process.env.TWILIO_SID, process.env.TWILIO_AUTH_TOKEN);\n\n  try {\n    const phoneInfo = await client.lookups.v1.phoneNumbers(phone).fetch({ type: ['carrier'] });\n    return NextResponse.json({\n      carrier: phoneInfo.carrier?.name || \"Unknown\",\n      lineType: phoneInfo.carrier?.type || \"Unknown\",\n      countryCode: phoneInfo.countryCode || \"Unknown\",\n    });\n  } catch (err: any) {\n    console.error(\"Twilio lookup error:\", err);\n    // Handle cases where the number is invalid\n    if (err.code === 20404) {\n      return NextResponse.json({ error: \"Invalid phone number\" }, { status: 400 });\n    }\n    return NextResponse.json({ error: \"Phone lookup failed\" }, { status: 500 });\n  }\n}\n